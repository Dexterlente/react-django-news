"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[597],{3597:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(9439),r=n(7313),c=n(8467),o=n(2135),s=n(4165),i=n(5861),u=n(8507),h=n(6287),d=n(6417);var l=function(e){var t=e.id,n=e.archived,c=e.onArchiveChange,o=(0,r.useState)(!1),l=(0,a.Z)(o,2),m=l[0],x=l[1];(0,r.useEffect)((function(){var e=u.Z.get("token");x(!!e)}),[]);var f=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.Z.get("token"),console.log("Token value:",a),a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,fetch("".concat(h.Z,"/api/articles/").concat(t,"/"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(a)},body:JSON.stringify({archived:!n})});case 6:e.sent.ok?c(t,!n):alert("There was an error archiving/unarchiving the item.");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(d.Fragment,{children:m&&(0,d.jsx)("button",{onClick:f,className:"py-2 mb-10 px-4 font-semibold rounded-lg shadow-md text-white hover:opacity-70 ".concat(n?"bg-[red]":"bg-[green]"),children:n?"Unarchive":"Archive"})})},m=n(5105),x=function(){var e=(0,c.UO)().id,t=(0,r.useState)({}),n=(0,a.Z)(t,2),s=n[0],i=n[1],x=(0,r.useState)(!0),f=(0,a.Z)(x,2),p=f[0],v=f[1],g=(0,r.useState)(!1),b=(0,a.Z)(g,2),j=b[0],k=b[1],Z=(0,r.useState)(""),w=(0,a.Z)(Z,2),y=w[0],C=w[1];(0,r.useEffect)((function(){!function(e){fetch("".concat(h.Z,"/api/articles/").concat(e)).then((function(e){return e.json()})).then((function(e){i(e),k(e.archived),v(!1)}))}(e),C(u.Z.get("token"))}),[e]);return(0,d.jsx)("div",{children:p?(0,d.jsx)(m.Z,{}):(0,d.jsxs)("div",{className:"text-center md:w-8/12 lg:w-6/12 mx-auto",children:[(0,d.jsx)("h1",{className:"font-bold text-[40px] mx-4 mb-4 mt-8",children:s.title}),(0,d.jsxs)("p",{className:"mt-4 text-sm text-start md:mx-24 mx-8",children:["By: ",s.author.first_name.charAt(0).toUpperCase()+s.author.first_name.slice(1).toLowerCase()," ",s.author.last_name.charAt(0).toUpperCase()+s.author.last_name.slice(1).toLowerCase()]}),(0,d.jsx)("p",{className:"mt-4 text-sm text-start md:mx-24 mx-8",children:new Date(s.time_created).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),(0,d.jsx)("p",{className:"text-[16px] md:m-24 m-8 text-left",dangerouslySetInnerHTML:{__html:s.content}}),y&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l,{id:e,archived:j,onArchiveChange:function(e,t){k(t)}}),(0,d.jsx)(o.rU,{to:"/edit-article/".concat(e),className:"py-2 mb-10 px-4 font-semibold rounded-lg shadow-md text-black hover:opacity-70",children:"Edit Article"})]})]})})}}}]);