"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[739],{4739:function(t,e,n){n.r(e),n.d(e,{default:function(){return l}});var r=n(9439),a=n(7313),o=n(8467),s=n(2135),c=n(4165),i=n(5861),u=n(8507),h=n(6287),d=n(6417);var m=function(t){var e=t.id,n=t.archived_post,o=t.onArchiveChange,s=(0,a.useState)(!1),m=(0,r.Z)(s,2),p=m[0],l=m[1];(0,a.useEffect)((function(){var t=u.Z.get("token");l(!!t)}),[]);var x=function(){var t=(0,i.Z)((0,c.Z)().mark((function t(){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=u.Z.get("token")){t.next=4;break}return alert("You must be logged in to perform this action."),t.abrupt("return");case 4:return t.next=6,fetch("".concat(h.Z,"/api/posts/").concat(e,"/"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(r)},body:JSON.stringify({archived_post:!n})});case 6:t.sent.ok?o(e,!n):alert("There was an error archiving/unarchiving the item.");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,d.jsx)(d.Fragment,{children:p&&(0,d.jsx)("button",{onClick:x,className:"py-2 mb-10 px-4 font-semibold rounded-lg shadow-md text-white hover:opacity-70 ".concat(n?"bg-[red]":"bg-[green]"),children:n?"Unarchive":"Archive"})})},p=n(5105),l=function(){var t=(0,o.UO)().id,e=(0,a.useState)({}),n=(0,r.Z)(e,2),c=n[0],i=n[1],l=(0,a.useState)(!0),x=(0,r.Z)(l,2),f=x[0],v=x[1],g=(0,a.useState)(!1),b=(0,r.Z)(g,2),_=b[0],j=b[1],Z=(0,a.useState)(""),k=(0,r.Z)(Z,2),w=k[0],y=k[1];(0,a.useEffect)((function(){!function(t){fetch("".concat(h.Z,"/api/posts/").concat(t)).then((function(t){return t.json()})).then((function(t){i(t),j(t.archived_post),v(!1)}))}(t),y(u.Z.get("token"))}),[t]);return(0,d.jsx)("div",{children:f?(0,d.jsx)(p.Z,{}):(0,d.jsxs)("div",{className:"text-center md:mx-32 xl:mx-52",children:[(0,d.jsx)("h1",{className:"font-bold text-[40px] mx-4 mb-4 mt-8",children:c.title_post}),(0,d.jsxs)("p",{className:"mt-4 text-sm text-start md:mx-24 mx-8",children:["By: ",c.author_post.first_name.charAt(0).toUpperCase()+c.author_post.first_name.slice(1).toLowerCase()," ",c.author_post.last_name.charAt(0).toUpperCase()+c.author_post.last_name.slice(1).toLowerCase()]}),(0,d.jsx)("p",{className:"mt-4 text-sm text-start md:mx-24 mx-8",children:new Date(c.time_created_post).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),(0,d.jsx)("p",{className:"text-[16px] md:m-24 m-8",children:c.content_post}),w&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m,{id:t,archived_post:_,onArchiveChange:function(t,e){j(e)}}),(0,d.jsx)(s.rU,{to:"/edit-post/".concat(t),className:"py-2 mb-10 px-4 font-semibold rounded-lg shadow-md text-black hover:opacity-70",children:"Edit Post"})]})]})})}}}]);